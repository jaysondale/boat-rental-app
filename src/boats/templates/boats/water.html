{% extends 'boats/base.html' %}
{% load static %}

{% block scripts %}
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
<script src="{% static 'boats/js/water.js' %}"></script>
{% endblock %}


{% block main_content %}

<div class='container top-container pt-4'>
	<div class='row'>
		<div class='col-md-10 col-12'>
			<h1>Boats for Rent</h1>
		</div>
		<div class='col-md-2 col-4'>
			<a href="{% url 'boat_post_form' %}" class="btn btn-primary" >Post Boat</a>
		</div>
	</div>

	<div class='row' style="margin-top: 20px; margin-left: 60px">
		{% for boat in boats %}
		<div class="card mr-4" style="width: 18rem; margin-top: 20px;">
			<img src="{{ boat.image.url }}" alt="Boat">
			<div class="card-body">
				<h5 class="card-title">{{ boat.name }}</h5>
				<p class="card-text"></p>

				<!-- Button trigger modal -->
				<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#booking-modal-{{boat.pk}}">
					Book Now
				</button>
			</div>
		</div>
		<!-- Modal -->
		<div class="modal fade" id="booking-modal-{{boat.pk}}" tabindex="-1" role="dialog" aria-labelledby="booking-modal-{{boat.pk}}" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<form action="{% url 'book_boat' boat_id=boat.pk%}" method="post">
					<div class="modal-content">
						<div class="modal-header">
						<h2 class="modal-title">{{boat.name}}</h2>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						</div>
						<div class="modal-body">
							<div class="row">
								<div class="col-12">
									<h4>Description</h4>
									<p id="description">{{boat.description}}</p>
								</div>
							</div>
							<div class="row">
								<div class="col-3">
									<b>Day Price:</b>
								</div>
								<div class="col-4">
									${{boat.dayPrice}}
								</div>
							</div>
							<div class="row">
								<div class="col-3">
									<b>Week Price:</b>
								</div>
								<div class="col-4">
									${{boat.weekPrice}}
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-12">
									<b>Photos</b>
									<img src="...">
								</div>
							</div>
							<hr>
							<!-- Calender plugin for booking dates -->
							<h4>Select Dates</h4>

							<div class="form-group row">
								<div class="col-12">
									{% csrf_token %}
									{{ form.startDay }}
									{{ form.endDay }}
								</div>
							</div>

						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							<input type="submit" class="btn btn-primary" value="Book"></button>
						</div>
					</div>
				</form>
			</div>
		</div>
		{% endfor %}
	</div>
</div>


{% endblock %}

